"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),(()=>{const e=exports.MonTY,n=exports.employees,s=Object.prototype.hasOwnProperty.call(exports,"absenceRecords"),a=Object.prototype.hasOwnProperty.call(exports,"returnToWorkRecords"),o=Object.prototype.hasOwnProperty.call(exports,"callOutLists"),r=Object.prototype.hasOwnProperty.call(exports,"afterHoursRecords"),l=document.querySelector("#employees--searchFilter"),t=document.querySelector("#container--employees");function i(e,n){var s,a;let o=!1;const r=e.querySelectorAll(".panel-block");for(const e of r)if(Number.parseInt(null!==(s=e.dataset.recordCreate_timeMillis)&&void 0!==s?s:"0",10)<Number.parseInt(null!==(a=n.dataset.recordCreate_timeMillis)&&void 0!==a?a:"0",10)){e.before(n),o=!0;break}o||e.append(n)}function c(l){let t;const c=n.find(e=>e.employeeNumber===l);cityssm.openHtmlModal("attendance-employee",{onshow(n){t=n,n.querySelector("#container--attendanceLogEmployee").innerHTML=`<div class="columns">\n            <div class="column is-5">\n              <strong>Employee Number</strong><br />\n              ${c.employeeNumber}\n            </div>\n            <div class="column">\n              <strong>Employee Name</strong><br />\n              ${c.employeeSurname}, ${c.employeeGivenName}\n            </div>\n          </div>`,cityssm.postJSON(`${e.urlPrefix}/attendance/doGetAttendanceRecords`,{employeeNumber:l},e=>{!function(e){var n,s,a,o,r,l,c;const d=document.createElement("div");d.className="panel";const m=t.querySelector("#container--attendanceLog");for(const a of e.absenceRecords){const e=document.createElement("div");e.className="panel-block is-block",e.dataset.recordCreate_timeMillis=new Date(a.recordCreate_dateTime).getTime().toString(),e.innerHTML=`<div class="columns is-mobile">\n          <div class="column is-narrow has-tooltip-right" data-tooltip="Absence">\n            <i class="fas fa-fw fa-sign-out-alt" aria-label="Absence"></i>\n          </div>\n          <div class="column">\n            <strong>${new Date(a.absenceDateTime).toLocaleDateString()}</strong>\n          </div>\n          <div class="column">\n            <strong>${null!==(n=a.absenceType)&&void 0!==n?n:""}</strong><br />\n            <span class="is-size-7">${null!==(s=a.recordComment)&&void 0!==s?s:""}</span>\n          </div>\n          </div>`,d.append(e)}for(const n of e.returnToWorkRecords){const e=document.createElement("div");e.className="panel-block is-block",e.dataset.recordCreate_timeMillis=new Date(n.recordCreate_dateTime).getTime().toString(),e.innerHTML=`<div class="columns is-mobile">\n          <div class="column is-narrow has-tooltip-right" data-tooltip="Return to Work">\n            <i class="fas fa-fw fa-sign-in-alt" aria-label="Return to Work"></i>\n          </div>\n          <div class="column">\n            <strong>${new Date(n.returnDateTime).toLocaleDateString()}</strong><br />\n            ${null!==(a=n.returnShift)&&void 0!==a?a:""}\n          </div>\n          <div class="column">\n            <strong>Return to Work</strong><br />\n            <span class="is-size-7">${null!==(o=n.recordComment)&&void 0!==o?o:""}</span>\n          </div>\n          </div>`,i(d,e)}for(const n of e.callOutRecords){const e=document.createElement("div");e.className="panel-block is-block",e.dataset.recordCreate_timeMillis=new Date(n.recordCreate_dateTime).getTime().toString(),e.innerHTML=`<div class="columns is-mobile">\n          <div class="column is-narrow has-tooltip-right" data-tooltip="Call Out">\n            <i class="fas fa-fw fa-phone" aria-label="Call Out"></i>\n          </div>\n          <div class="column">\n            <strong>${new Date(n.callOutDateTime).toLocaleDateString()}</strong><br />\n            <span class="is-size-7">\n              <i class="fas fa-fw ${null!==(r=n.isSuccessful)&&void 0!==r&&r?" fa-check has-text-success":" fa-times has-text-danger"}" aria-hidden="true"></i>\n              ${null!==(l=n.responseType)&&void 0!==l?l:""}\n            </span>\n          </div>\n          <div class="column">\n            <strong>Call Out</strong><br />\n            <span class="is-size-7">${null!==(c=n.recordComment)&&void 0!==c?c:""}</span>\n          </div>\n          </div>`,i(d,e)}d.hasChildNodes()?(m.innerHTML="",m.append(d)):m.innerHTML=`<div class="message is-info">\n          <p class="message-body">There are no attendance records in the past ${exports.recentDays} days.</p>\n          </div>`}(e)})},onshown(n){bulmaJS.toggleHtmlClipped(),e.initializeMenuTabs(n.querySelectorAll(".menu a"),n.querySelectorAll("article"));const t=n.querySelector("#tab--attendanceReports .panel");s&&(null==t||t.insertAdjacentHTML("beforeend",`<a class="panel-block" href="${e.urlPrefix}/reports/absenceRecords-recent-byEmployeeNumber/?employeeNumber=${l}" download>\n              <div class="columns is-mobile is-variable is-2">\n                <div class="column is-narrow">\n                  <i class="fas fa-2x fa-file" aria-hidden="true"></i>\n                </div>\n                <div class="column">\n                Recent Absence Records\n                </div>\n              </div>\n            </a>`)),a&&(null==t||t.insertAdjacentHTML("beforeend",`<a class="panel-block" href="${e.urlPrefix}/reports/returnToWorkRecords-recent-byEmployeeNumber/?employeeNumber=${l}" download>\n              <div class="columns is-mobile is-variable is-2">\n                <div class="column is-narrow">\n                  <i class="fas fa-2x fa-file" aria-hidden="true"></i>\n                </div>\n                <div class="column">\n                Recent Return to Work Records\n                </div>\n              </div>\n            </a>`)),o&&(null==t||t.insertAdjacentHTML("beforeend",`<a class="panel-block" href="${e.urlPrefix}/reports/callOutRecords-recent-byEmployeeNumber/?employeeNumber=${l}" download>\n              <div class="columns is-mobile is-variable is-2">\n                <div class="column is-narrow">\n                  <i class="fas fa-2x fa-file" aria-hidden="true"></i>\n                </div>\n                <div class="column">\n                Recent Call Out Records\n                </div>\n              </div>\n            </a>`)),r&&(null==t||t.insertAdjacentHTML("beforeend",`<a class="panel-block" href="${e.urlPrefix}/reports/afterHoursRecords-recent-byEmployeeNumber/?employeeNumber=${l}" download>\n              <div class="columns is-mobile is-variable is-2">\n                <div class="column is-narrow">\n                  <i class="fas fa-2x fa-file" aria-hidden="true"></i>\n                </div>\n                <div class="column">\n                Recent After Hours Records\n                </div>\n              </div>\n            </a>`))},onremoved(){bulmaJS.toggleHtmlClipped()}})}function d(e){var n;e.preventDefault(),c(null!==(n=e.currentTarget.dataset.employeeNumber)&&void 0!==n?n:"")}function m(){var e;if(0===n.length)return void(t.innerHTML='<div class="message is-warning">\n        <p class="message-body">There are no active employees to report.</p>\n        </div>');const s=l.value.trim().toLowerCase().split(" "),a=document.createElement("div");a.className="panel";e:for(const o of n){const n=`${o.employeeNumber} ${o.employeeGivenName} ${o.employeeSurname}`.toLowerCase();for(const e of s)if(!n.includes(e))continue e;const r=document.createElement("a");r.className="panel-block is-block",r.dataset.employeeNumber=o.employeeNumber,r.href="#",r.innerHTML=`<div class="columns is-mobile">\n        <div class="column is-narrow">\n          <i class="fas fa-hard-hat" aria-hidden="true"></i>\n        </div>\n        <div class="column is-4">\n          <strong>${o.employeeNumber}</strong>\n        </div>\n        <div class="column">\n          <strong>${o.employeeSurname}, ${o.employeeGivenName}</strong><br />\n          <span class="is-size-7">${null!==(e=o.jobTitle)&&void 0!==e?e:""}</span>\n        </div>\n        </div>`,r.addEventListener("click",d),a.append(r)}a.hasChildNodes()?(t.innerHTML="",t.append(a)):t.innerHTML='<div class="message is-info">\n        <p class="message-body">There are no active employees that meet the search criteria.</p>\n        </div>'}m(),l.addEventListener("keyup",m)})();