"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),(()=>{const e=exports.MonTY,n=exports.employees,s=Object.prototype.hasOwnProperty.call(exports,"absenceRecords"),a=Object.prototype.hasOwnProperty.call(exports,"returnToWorkRecords"),o=Object.prototype.hasOwnProperty.call(exports,"callOutLists"),r=Object.prototype.hasOwnProperty.call(exports,"afterHoursRecords"),t=document.querySelector("#employees--searchFilter"),l=document.querySelector("#container--employees");function i(e,n){let s=!1;const a=e.querySelectorAll(".panel-block");for(const e of a)if(e.dataset.recordCreate_timeMillis<n.dataset.recordCreate_timeMillis){e.before(n),s=!0;break}s||e.append(n)}function c(t){let l;const c=n.find(e=>e.employeeNumber===t);cityssm.openHtmlModal("attendance-employee",{onshow(n){l=n,n.querySelector("#container--attendanceLogEmployee").innerHTML=`<div class="columns">\n            <div class="column is-5">\n              <strong>Employee Number</strong><br />\n              ${c.employeeNumber}\n            </div>\n            <div class="column">\n              <strong>Employee Name</strong><br />\n              ${c.employeeSurname}, ${c.employeeGivenName}\n            </div>\n          </div>`,cityssm.postJSON(e.urlPrefix+"/attendance/doGetAttendanceRecords",{employeeNumber:t},e=>{!function(e){var n,s,a,o,r,t;const c=document.createElement("div");c.className="panel";const d=l.querySelector("#container--attendanceLog");for(const s of e.absenceRecords){const e=document.createElement("div");e.className="panel-block is-block",e.dataset.recordCreate_timeMillis=new Date(s.recordCreate_dateTime).getTime().toString(),e.innerHTML=`<div class="columns is-mobile">\n          <div class="column is-narrow has-tooltip-right" data-tooltip="Absence">\n            <i class="fas fa-fw fa-sign-out-alt" aria-label="Absence"></i>\n          </div>\n          <div class="column">\n            <strong>${new Date(s.absenceDateTime).toLocaleDateString()}</strong>\n          </div>\n          <div class="column">\n            <strong>${s.absenceType}</strong><br />\n            <span class="is-size-7">${null!==(n=s.recordComment)&&void 0!==n?n:""}</span>\n          </div>\n          </div>`,c.append(e)}for(const n of e.returnToWorkRecords){const e=document.createElement("div");e.className="panel-block is-block",e.dataset.recordCreate_timeMillis=new Date(n.recordCreate_dateTime).getTime().toString(),e.innerHTML=`<div class="columns is-mobile">\n          <div class="column is-narrow has-tooltip-right" data-tooltip="Return to Work">\n            <i class="fas fa-fw fa-sign-in-alt" aria-label="Return to Work"></i>\n          </div>\n          <div class="column">\n            <strong>${new Date(n.returnDateTime).toLocaleDateString()}</strong><br />\n            ${null!==(s=n.returnShift)&&void 0!==s?s:""}\n          </div>\n          <div class="column">\n            <strong>Return to Work</strong><br />\n            <span class="is-size-7">${null!==(a=n.recordComment)&&void 0!==a?a:""}</span>\n          </div>\n          </div>`,i(c,e)}for(const n of e.callOutRecords){const e=document.createElement("div");e.className="panel-block is-block",e.dataset.recordCreate_timeMillis=new Date(n.recordCreate_dateTime).getTime().toString(),e.innerHTML=`<div class="columns is-mobile">\n          <div class="column is-narrow has-tooltip-right" data-tooltip="Call Out">\n            <i class="fas fa-fw fa-phone" aria-label="Call Out"></i>\n          </div>\n          <div class="column">\n            <strong>${new Date(n.callOutDateTime).toLocaleDateString()}</strong><br />\n            <span class="is-size-7">\n              <i class="fas fa-fw ${null!==(o=n.isSuccessful)&&void 0!==o&&o?" fa-check has-text-success":" fa-times has-text-danger"}" aria-hidden="true"></i>\n              ${null!==(r=n.responseType)&&void 0!==r?r:""}\n            </span>\n          </div>\n          <div class="column">\n            <strong>Call Out</strong><br />\n            <span class="is-size-7">${null!==(t=n.recordComment)&&void 0!==t?t:""}</span>\n          </div>\n          </div>`,i(c,e)}c.hasChildNodes()?(d.innerHTML="",d.append(c)):d.innerHTML=`<div class="message is-info">\n          <p class="message-body">There are no attendance records in the past ${exports.recentDays} days.</p>\n          </div>`}(e)})},onshown(n){bulmaJS.toggleHtmlClipped(),e.initializeMenuTabs(n.querySelectorAll(".menu a"),n.querySelectorAll("article"));const l=n.querySelector("#tab--attendanceReports .panel");s&&(null==l||l.insertAdjacentHTML("beforeend",`<a class="panel-block" href="${e.urlPrefix}/reports/absenceRecords-recent-byEmployeeNumber/?employeeNumber=${t}" download>\n              <div class="columns is-mobile is-variable is-2">\n                <div class="column is-narrow">\n                  <i class="fas fa-2x fa-file" aria-hidden="true"></i>\n                </div>\n                <div class="column">\n                Recent Absence Records\n                </div>\n              </div>\n            </a>`)),a&&(null==l||l.insertAdjacentHTML("beforeend",`<a class="panel-block" href="${e.urlPrefix}/reports/returnToWorkRecords-recent-byEmployeeNumber/?employeeNumber=${t}" download>\n              <div class="columns is-mobile is-variable is-2">\n                <div class="column is-narrow">\n                  <i class="fas fa-2x fa-file" aria-hidden="true"></i>\n                </div>\n                <div class="column">\n                Recent Return to Work Records\n                </div>\n              </div>\n            </a>`)),o&&(null==l||l.insertAdjacentHTML("beforeend",`<a class="panel-block" href="${e.urlPrefix}/reports/callOutRecords-recent-byEmployeeNumber/?employeeNumber=${t}" download>\n              <div class="columns is-mobile is-variable is-2">\n                <div class="column is-narrow">\n                  <i class="fas fa-2x fa-file" aria-hidden="true"></i>\n                </div>\n                <div class="column">\n                Recent Call Out Records\n                </div>\n              </div>\n            </a>`)),r&&(null==l||l.insertAdjacentHTML("beforeend",`<a class="panel-block" href="${e.urlPrefix}/reports/afterHoursRecords-recent-byEmployeeNumber/?employeeNumber=${t}" download>\n              <div class="columns is-mobile is-variable is-2">\n                <div class="column is-narrow">\n                  <i class="fas fa-2x fa-file" aria-hidden="true"></i>\n                </div>\n                <div class="column">\n                Recent After Hours Records\n                </div>\n              </div>\n            </a>`))},onremoved(){bulmaJS.toggleHtmlClipped()}})}function d(e){var n;e.preventDefault(),c(null!==(n=e.currentTarget.dataset.employeeNumber)&&void 0!==n?n:"")}function m(){var e;if(0===n.length)return void(l.innerHTML='<div class="message is-warning">\n        <p class="message-body">There are no active employees to report.</p>\n        </div>');const s=t.value.trim().toLowerCase().split(" "),a=document.createElement("div");a.className="panel";e:for(const o of n){const n=(o.employeeNumber+" "+o.employeeGivenName+" "+o.employeeSurname).toLowerCase();for(const e of s)if(!n.includes(e))continue e;const r=document.createElement("a");r.className="panel-block is-block",r.dataset.employeeNumber=o.employeeNumber,r.href="#",r.innerHTML=`<div class="columns is-mobile">\n        <div class="column is-narrow">\n          <i class="fas fa-hard-hat" aria-hidden="true"></i>\n        </div>\n        <div class="column is-4">\n          <strong>${o.employeeNumber}</strong>\n        </div>\n        <div class="column">\n          <strong>${o.employeeSurname}, ${o.employeeGivenName}</strong><br />\n          <span class="is-size-7">${null!==(e=o.jobTitle)&&void 0!==e?e:""}</span>\n        </div>\n        </div>`,r.addEventListener("click",d),a.append(r)}a.hasChildNodes()?(l.innerHTML="",l.append(a)):l.innerHTML='<div class="message is-info">\n        <p class="message-body">There are no active employees that meet the search criteria.</p>\n        </div>'}m(),t.addEventListener("keyup",m)})();