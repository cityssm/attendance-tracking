"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),(()=>{var e;const n=exports.urlPrefix,t=document.querySelector("#employee--message"),s=document.querySelector("#employee--employeeNumber");function o(e){"Enter"===e.key?a():"Shift"!==e.key&&"Tab"!==e.key&&(t.innerHTML="")}s.addEventListener("keyup",o);const i=document.querySelector("#employee--homeContact_lastFourDigits");function a(){return t.innerHTML='<p class="has-text-centered">\n      <i class="fas fa-4x fa-cog fa-spin" aria-hidden="true"></i><br />\n      <em>Loading employee...</em>\n      </p>',s.checkValidity()?i.checkValidity()?void cityssm.postJSON(n+"/doValidateEmployee",{employeeNumber:s.value,employeeHomeContactLastFourDigits:i.value},e=>{var n,s,o,i,a,l;const d=e;d.success?(t.innerHTML="",null===(n=document.querySelector("#tab--employee"))||void 0===n||n.classList.add("is-hidden"),document.querySelector("#employeeOptions--employeeName").textContent=null!==(s=d.employeeName)&&void 0!==s?s:"",null===(o=document.querySelector("#tab--employeeOptions"))||void 0===o||o.classList.remove("is-hidden"),null===(i=document.querySelector("#employeeOptionsTab--menu"))||void 0===i||i.classList.remove("is-hidden")):(null!==(a=d.isAbuser)&&void 0!==a&&a&&window.location.reload(),t.innerHTML=`<div class="message is-danger">\n            <p class="message-body">\n            <strong>${null!==(l=d.errorMessage)&&void 0!==l?l:""}</strong><br />\n            If errors persist, please contact a manager for assistance.</p>\n            </div>`)}):(t.innerHTML='<div class="message is-danger">\n        <p class="message-body">\n        Please enter a valid <strong>Last Four Digits</strong>.\n        </p>\n        </div>',void i.focus()):(t.innerHTML='<div class="message is-danger">\n        <p class="message-body">\n        Please enter a valid <strong>Employee Number</strong>.\n        </p>\n        </div>',void s.focus())}function l(e){var n;void 0!==e&&e.preventDefault();const o=document.querySelectorAll(".panel-tab, .employeeOptionsTab");for(const e of o)e.classList.add("is-hidden");s.value="",i.value="",t.innerHTML="",null===(n=document.querySelector("#tab--employee"))||void 0===n||n.classList.remove("is-hidden")}i.addEventListener("keyup",o),null===(e=document.querySelector("#employee--nextButton"))||void 0===e||e.addEventListener("click",a);const d=document.querySelectorAll(".is-sign-out-button");for(const e of d)e.addEventListener("click",l);function r(e){var t,o;e.preventDefault();const a=e.currentTarget.hash;switch(null===(t=document.querySelector("#employeeOptionsTab--menu"))||void 0===t||t.classList.add("is-hidden"),a){case"#employeeOptionsTab--callOutListAdd":!function(){const e=document.querySelector("#container--callOutListAdd");e.innerHTML='<p class="has-text-centered">\n      <i class="fas fa-4x fa-cog fa-spin" aria-hidden="true"></i><br />\n      <em>Loading call out lists...</em>\n      </p>',cityssm.postJSON(n+"/doGetAvailableCallOutLists",{employeeNumber:s.value,employeeHomeContactLastFourDigits:i.value},n=>{var t,s,o;const i=n;if(0===i.callOutLists.length)return void(e.innerHTML='<div class="message is-info">\n          <p class="message-body">\n            There are no call out lists that you are eligible to sign up for.\n          </p>\n          </div>');const a=document.createElement("div");a.className="panel";for(const e of i.callOutLists){const n=document.createElement("div");n.className="panel-block is-justify-content-space-between",n.dataset.listId=e.listId,n.innerHTML=`<div>\n            <strong>${e.listName}</strong><br />\n            ${null!==(t=e.listDescription)&&void 0!==t?t:""}\n            </div>\n            <div class="is-add-button-container"></div>`,null===(s=e.hasSelfSignUpKey)||void 0===s||s?n.querySelector(".is-add-button-container").innerHTML=`<div class="field has-addons">\n                <div class="control has-icons-left">\n                  <input class="input"\n                    id="callOutListAdd--selfSignUpKey_${e.listId}"\n                    name="selfSignUpKey_${e.listId}"\n                    type="text"\n                    placeholder="Sign Up Key"\n                    maxlength="10"\n                    aria-label="Sign Up Key"\n                    required />\n                  <span class="icon is-small is-left">\n                    <i class="fas fa-key" aria-hidden="true"></i>\n                  </span>\n                </div>\n                <div class="control">\n                  <button class="button is-success is-add-button" type="button">\n                    <span class="icon"><i class="fas fa-plus" aria-hidden="true"></i></span>\n                    <span>Add to List</span>\n                  </button>\n                </div>\n              </div>`:n.querySelector(".is-add-button-container").innerHTML='<button class="button is-success is-add-button" type="button">\n                <span class="icon"><i class="fas fa-plus" aria-hidden="true"></i></span>\n                <span>Add to List</span>\n              </button>',null===(o=n.querySelector(".is-add-button"))||void 0===o||o.addEventListener("click",p),a.append(n)}e.innerHTML="",e.append(a)})}()}null===(o=document.querySelector(a))||void 0===o||o.classList.remove("is-hidden")}window.addEventListener("load",function(){let e;function n(){window.clearTimeout(e),e=window.setTimeout(l,12e4)}window.addEventListener("load",n),document.addEventListener("mousemove",n),document.addEventListener("keydown",n)});const c=document.querySelectorAll("#employeeOptionsTab--menu a.panel-block");for(const e of c)e.addEventListener("click",r);function u(e){var n;void 0!==e&&e.preventDefault();const t=document.querySelectorAll(".employeeOptionsTab");for(const e of t)e.classList.add("is-hidden");null===(n=document.querySelector("#employeeOptionsTab--menu"))||void 0===n||n.classList.remove("is-hidden")}const m=document.querySelectorAll(".is-back-to-options-button");for(const e of m)e.addEventListener("click",u);function p(e){var t;e.preventDefault();const o=e.currentTarget;o.disabled=!0,o.classList.add("is-loading");const a=o.closest(".panel-block"),l=null!==(t=a.dataset.listId)&&void 0!==t?t:"";let d="";const r=a.querySelector("#callOutListAdd--selfSignUpKey_"+l);if(null!==r&&""===(d=r.value))return r.focus(),o.disabled=!1,void o.classList.remove("is-loading");cityssm.postJSON(n+"/doAddEmployeeToCallOutList",{employeeNumber:s.value,employeeHomeContactLastFourDigits:i.value,listId:l,selfSignUpKey:d},e=>{var n;const t=e;t.success?a.querySelector(".is-add-button-container").innerHTML='<i class="fas fa-check" aria-hidden="true"></i> Added to List':(bulmaJS.alert({title:"Error Adding Employee to List",message:null!==(n=t.errorMessage)&&void 0!==n?n:"Unknown error.  Please try again",contextualColorName:"danger"}),o.disabled=!1,o.classList.remove("is-loading"))})}})();